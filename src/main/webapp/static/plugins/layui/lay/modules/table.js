layui.define(["laytpl","laypage","layer","form"],function(a){"use strict";var b=layui.$,c=layui.laytpl,d=layui.laypage,e=layui.layer,f=layui.form,g=layui.hint(),h=layui.device(),i={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(a){var c=this;return c.config=b.extend({},c.config,a),c},on:function(a,b){return layui.onevent.call(this,k,a,b)}},j=function(){var a=this,b=a.config,c=b.id;return c&&(j.config[c]=b),{reload:function(b){a.reload.call(a,b)},config:b}},k="table",l=".layui-table",o="layui-hide",q="layui-none",r="layui-table-view",s=".layui-table-header",t=".layui-table-body",u=".layui-table-main",v=".layui-table-fixed",w=".layui-table-fixed-l",x=".layui-table-fixed-r",y=".layui-table-tool",z=".layui-table-page",A=".layui-table-sort",B="layui-table-edit",C="layui-table-hover",D=function(a){var b='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return a=a||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return a.fixed&&"right"!==a.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===a.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+b+' {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",a.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},E=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),F=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',D(),"</div>",'<div class="layui-table-body layui-table-main">',E,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',D({fixed:!0}),"</div>",'<div class="layui-table-body">',E,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',D({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',E,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),G=b(window),H=b(document),I=function(a){var c=this;c.index=++i.index,c.config=b.extend({},c.config,i.config,a),c.render()};I.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"无数据"}},I.prototype.render=function(){var e,f,g,h,a=this,d=a.config;return d.elem=b(d.elem),d.where=d.where||{},d.id=d.id||d.elem.attr("id"),d.request=b.extend({pageName:"page",limitName:"limit"},d.request),d.response=b.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},d.response),"object"==typeof d.page&&(d.limit=d.page.limit||d.limit,d.limits=d.page.limits||d.limits,a.page=d.page.curr=d.page.curr||1,delete d.page.elem,delete d.page.jump),d.elem[0]?(a.setArea(),e=d.elem,f=e.next("."+r),g=a.elem=b(c(F).render({VIEW_CLASS:r,data:d,index:a.index})),d.index=a.index,f[0]&&f.remove(),e.after(g),a.layHeader=g.find(s),a.layMain=g.find(u),a.layBody=g.find(t),a.layFixed=g.find(v),a.layFixLeft=g.find(w),a.layFixRight=g.find(x),a.layTool=g.find(y),a.layPage=g.find(z),a.layTool.html(c(b(d.toolbar).html()||"").render(d)),d.height&&a.fullSize(),d.cols.length>1&&(h=a.layFixed.find(s).find("th"),h.height(a.layHeader.height()-1-parseFloat(h.css("padding-top"))-parseFloat(h.css("padding-bottom")))),a.pullData(a.page),a.events(),void 0):a},I.prototype.initOpts=function(a){var b=this,d=(b.config,{checkbox:48,space:15,numbers:40});a.checkbox&&(a.type="checkbox"),a.space&&(a.type="space"),a.type||(a.type="normal"),"normal"!==a.type&&(a.unresize=!0,a.width=a.width||d[a.type])},I.prototype.setArea=function(){var a=this,b=a.config,c=0,d=0,e=0,f=0,g=b.width||function(){var a=function(c){var d,e;c=c||b.elem.parent(),d=c.width();try{e="none"===c.css("display")}catch(f){}return!c[0]||d&&!e?d:a(c.parent())};return a()}();a.eachCols(function(){c++}),g-=function(){return"line"===b.skin||"nob"===b.skin?2:c+1}(),layui.each(b.cols,function(b,c){layui.each(c,function(b,e){var h;return e?(a.initOpts(e),h=e.width||0,e.colspan>1||(/\d+%$/.test(h)?e.width=h=Math.floor(parseFloat(h)/100*g):h||(e.width=h=0,d++),f+=h),void 0):(c.splice(b,1),void 0)})}),a.autoColNums=d,g>f&&d&&(e=(g-f)/d),layui.each(b.cols,function(a,c){layui.each(c,function(a,c){var d=c.minWidth||b.cellMinWidth;c.colspan>1||0===c.width&&(c.width=Math.floor(e>=d?e:d))})}),b.height&&/^full-\d+$/.test(b.height)&&(a.fullHeightGap=b.height.split("-")[1],b.height=G.height()-a.fullHeightGap)},I.prototype.reload=function(a){var c=this;c.config.data&&c.config.data.constructor===Array&&delete c.config.data,c.config=b.extend({},c.config,a),c.render()},I.prototype.page=1,I.prototype.pullData=function(a,c){var j,k,l,d=this,f=d.config,g=f.request,h=f.response,i=function(){"object"==typeof f.initSort&&d.sort(f.initSort.field,f.initSort.type)};d.startTime=(new Date).getTime(),f.url?(j={},j[g.pageName]=a,j[g.limitName]=f.limit,b.ajax({type:f.method||"get",url:f.url,data:b.extend(j,f.where),dataType:"json",success:function(b){b[h.statusName]!=h.statusCode?(d.renderForm(),d.layMain.html('<div class="'+q+'">'+(b[h.msgName]||"返回的数据状态异常")+"</div>")):(d.renderData(b,a,b[h.countName]),i(),f.time=(new Date).getTime()-d.startTime+" ms"),c&&e.close(c),"function"==typeof f.done&&f.done(b,a,b[h.countName])},error:function(){d.layMain.html('<div class="'+q+'">数据接口请求异常</div>'),d.renderForm(),c&&e.close(c)}})):f.data&&f.data.constructor===Array&&(k={},l=a*f.limit-f.limit,k[h.dataName]=f.data.concat().splice(l,f.limit),k[h.countName]=f.data.length,d.renderData(k,a,f.data.length),i(),"function"==typeof f.done&&f.done(k,a,k[h.countName]))},I.prototype.eachCols=function(a){var f,c=b.extend(!0,[],this.config.cols),d=[],e=0;layui.each(c,function(a,b){layui.each(b,function(b,f){if(f.colspan>1){var g=0;e++,f.CHILD_COLS=[],layui.each(c[a+1],function(a,b){b.PARENT_COL||g==f.colspan||(b.PARENT_COL=e,f.CHILD_COLS.push(b),g+=b.colspan>1?b.colspan:1)})}f.PARENT_COL||d.push(f)})}),f=function(b){layui.each(b||d,function(b,c){return c.CHILD_COLS?f(c.CHILD_COLS):(a(b,c),void 0)})},f()},I.prototype.renderData=function(a,f,g,h){var j=this,k=j.config,l=a[k.response.dataName]||[],m=[],n=[],p=[],r=function(){return!h&&j.sortKey?j.sort(j.sortKey.field,j.sortKey.sort,!0):(layui.each(l,function(a,d){var e=[],g=[],l=[],o=a+k.limit*(f-1)+1;0!==d.length&&(h||(d[i.config.indexName]=a),j.eachCols(function(a,f){var p,h=f.field||a,m=d[h];j.getColElem(j.layHeader,h),(void 0===m||null===m)&&(m=""),f.colspan>1||(p=['<td data-field="'+h+'" '+function(){var a=[];return f.edit&&a.push('data-edit="'+f.edit+'"'),f.align&&a.push('align="'+f.align+'"'),f.templet&&a.push('data-content="'+m+'"'),f.toolbar&&a.push('data-off="true"'),f.event&&a.push('lay-event="'+f.event+'"'),f.style&&a.push('style="'+f.style+'"'),f.minWidth&&a.push('data-minwidth="'+f.minWidth+'"'),a.join(" ")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){var a=k.index+"-"+h;return"normal"===f.type?a:a+" laytable-cell-"+f.type}()+'">'+function(){var a=b.extend(!0,{LAY_INDEX:o},d);return"checkbox"===f.type?'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){var b=i.config.checkName;return f[b]?(d[b]=f[b],f[b]?"checked":""):a[b]?"checked":""}()+">":"numbers"===f.type?o:f.toolbar?c(b(f.toolbar).html()||"").render(a):f.templet?function(){return"function"==typeof f.templet?f.templet(a):c(b(f.templet).html()||String(m)).render(a)}():m}(),"</div></td>"].join(""),e.push(p),f.fixed&&"right"!==f.fixed&&g.push(p),"right"===f.fixed&&l.push(p))}),m.push('<tr data-index="'+a+'">'+e.join("")+"</tr>"),n.push('<tr data-index="'+a+'">'+g.join("")+"</tr>"),p.push('<tr data-index="'+a+'">'+l.join("")+"</tr>"))}),j.layBody.scrollTop(0),j.layMain.find("."+q).remove(),j.layMain.find("tbody").html(m.join("")),j.layFixLeft.find("tbody").html(n.join("")),j.layFixRight.find("tbody").html(p.join("")),j.renderForm(),j.syncCheckAll(),j.haveInit?j.scrollPatch():setTimeout(function(){j.scrollPatch()},50),j.haveInit=!0,e.close(j.tipsIndex),void 0)};return j.key=k.id||k.index,i.cache[j.key]=l,j.layPage[0===l.length&&1==f?"addClass":"removeClass"](o),h?r():0===l.length?(j.renderForm(),j.layFixed.remove(),j.layMain.find("tbody").html(""),j.layMain.find("."+q).remove(),j.layMain.append('<div class="'+q+'">'+k.text.none+"</div>")):(r(),k.page&&(k.page=b.extend({elem:"layui-table-page"+k.index,count:g,limit:k.limit,limits:k.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(a,b){b||(j.page=a.curr,k.limit=a.limit,j.pullData(a.curr,j.loading()))}},k.page),k.page.count=g,d.render(k.page)),void 0)},I.prototype.getColElem=function(a,b){var c=this,d=c.config;return a.eq(0).find(".laytable-cell-"+(d.index+"-"+b)+":eq(0)")},I.prototype.renderForm=function(a){f.render(a,"LAY-table-"+this.index)},I.prototype.sort=function(a,c,d,e){var h,o,p,f=this,j={},l=f.config,m=l.elem.attr("lay-filter"),n=i.cache[f.key];"string"==typeof a&&f.layHeader.find("th").each(function(){var e=b(this),f=e.data("field");return f===a?(a=e,h=f,!1):void 0});try{if(h=h||a.data("field"),f.sortKey&&!d&&h===f.sortKey.field&&c===f.sortKey.sort)return;p=f.layHeader.find("th .laytable-cell-"+l.index+"-"+h).find(A),f.layHeader.find("th").find(A).removeAttr("lay-sort"),p.attr("lay-sort",c||null),f.layFixed.find("th")}catch(q){return g.error("Table modules: Did not match to field")}f.sortKey={field:h,sort:c},"asc"===c?o=f.config.page?n:layui.sort(n,h):"desc"===c?o=f.config.page?n:layui.sort(n,h,!0):(o=layui.sort(n,i.config.indexName),delete f.sortKey),j[l.response.dataName]=o,f.renderData(j,f.page,f.count,!0),e&&layui.event.call(a,k,"sort("+m+")",{field:h,type:c})},I.prototype.loading=function(){var a=this,b=a.config;return b.loading&&b.url?e.msg("数据请求中",{icon:16,offset:[a.elem.offset().top+a.elem.height()/2-35-G.scrollTop()+"px",a.elem.offset().left+a.elem.width()/2-90-G.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1}):void 0},I.prototype.setCheckData=function(a,b){var c=this,d=c.config,e=i.cache[c.key];e[a]&&e[a].constructor!==Array&&(e[a][d.checkName]=b)},I.prototype.syncCheckAll=function(){var a=this,b=a.config,c=a.layHeader.find('input[name="layTableCheckbox"]'),d=function(c){return a.eachCols(function(a,d){"checkbox"===d.type&&(d[b.checkName]=c)}),c};c[0]&&(i.checkStatus(a.key).isAll?(c[0].checked||(c.prop("checked",!0),a.renderForm("checkbox")),d(!0)):(c[0].checked&&(c.prop("checked",!1),a.renderForm("checkbox")),d(!1)))},I.prototype.getCssRule=function(a,b){var c=this,d=c.elem.find("style")[0],e=d.sheet||d.styleSheet||{},f=e.cssRules||e.rules;layui.each(f,function(d,e){return e.selectorText===".laytable-cell-"+c.index+"-"+a?(b(e),!0):void 0})},I.prototype.fullSize=function(){var d,a=this,b=a.config,c=b.height;a.fullHeightGap&&(c=G.height()-a.fullHeightGap,135>c&&(c=135),a.elem.css("height",c)),d=parseFloat(c)-parseFloat(a.layHeader.height())-1,b.toolbar&&(d-=a.layTool.outerHeight()),b.page&&(d=d-a.layPage.outerHeight()-1),a.layMain.css("height",d)},I.prototype.getScrollWidth=function(a){var b=0;return a?b=a.offsetWidth-a.clientWidth:(a=document.createElement("div"),a.style.width="100px",a.style.height="100px",a.style.overflowY="scroll",document.body.appendChild(a),b=a.offsetWidth-a.clientWidth,document.body.removeChild(a)),b},I.prototype.scrollPatch=function(){var h,i,j,k,l,a=this,c=a.layMain.children("table"),d=a.layMain.width()-a.layMain.prop("clientWidth"),e=a.layMain.height()-a.layMain.prop("clientHeight"),f=a.getScrollWidth(a.layMain[0]),g=c.outerWidth()-a.layMain.width();a.autoColNums&&5>g&&!a.scrollPatchWStatus&&(h=a.layHeader.eq(0).find("thead th:last-child"),i=h.data("field"),a.getCssRule(i,function(b){var c=b.style.width||h.outerWidth();b.style.width=parseFloat(c)-f-g+"px",a.layMain.height()-a.layMain.prop("clientHeight")>0&&(b.style.width=parseFloat(b.style.width)-1+"px"),a.scrollPatchWStatus=!0})),d&&e?a.elem.find(".layui-table-patch")[0]||(j=b('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>'),j.find("div").css({width:d}),a.layHeader.eq(0).find("thead tr").append(j)):a.layHeader.eq(0).find(".layui-table-patch").remove(),k=a.layMain.height(),l=k-e,a.layFixed.find(t).css("height",c.height()>l?l:"auto"),a.layFixRight[g>0?"removeClass":"addClass"](o),a.layFixRight.css("right",d-1)},I.prototype.events=function(){var l,a=this,d=a.config,f=b("body"),g={},j=a.layHeader.find("th"),m=".layui-table-cell",n=d.elem.attr("lay-filter");j.on("mousemove",function(a){var c=b(this),d=c.offset().left,e=a.clientX-d;c.attr("colspan")>1||c.data("unresize")||g.resizeStart||(g.allowResize=c.width()-e<=10,f.css("cursor",g.allowResize?"col-resize":""))}).on("mouseleave",function(){b(this),g.resizeStart||f.css("cursor","")}).on("mousedown",function(c){var f,e=b(this);g.allowResize&&(f=e.data("field"),c.preventDefault(),g.resizeStart=!0,g.offset=[c.clientX,c.clientY],a.getCssRule(f,function(a){var b=a.style.width||e.outerWidth();g.rule=a,g.ruleWidth=parseFloat(b),g.minWidth=e.data("minwidth")||d.cellMinWidth}))}),H.on("mousemove",function(b){if(g.resizeStart){if(b.preventDefault(),g.rule){var c=g.ruleWidth+b.clientX-g.offset[0];c<g.minWidth&&(c=g.minWidth),g.rule.style.width=c+"px",e.close(a.tipsIndex)}l=1}}).on("mouseup",function(){g.resizeStart&&(g={},f.css("cursor",""),a.scrollPatch()),2===l&&(l=null)}),j.on("click",function(){var f,c=b(this),d=c.find(A),e=d.attr("lay-sort");return d[0]&&1!==l?(f="asc"===e?"desc":"desc"===e?null:"asc",a.sort(c,f,null,!0),void 0):l=2}).find(A+" .layui-edge ").on("click",function(c){var d=b(this),e=d.index(),f=d.parents("th").eq(0).data("field");layui.stope(c),0===e?a.sort(f,"asc",null,!0):a.sort(f,"desc",null,!0)}),a.elem.on("click",'input[name="layTableCheckbox"]+',function(){var c=b(this).prev(),d=a.layBody.find('input[name="layTableCheckbox"]'),e=c.parents("tr").eq(0).data("index"),f=c[0].checked,g="layTableAllChoose"===c.attr("lay-filter");g?(d.each(function(b,c){c.checked=f,a.setCheckData(b,f)}),a.syncCheckAll(),a.renderForm("checkbox")):(a.setCheckData(e,f),a.syncCheckAll()),layui.event.call(this,k,"checkbox("+n+")",{checked:f,data:i.cache[a.key]?i.cache[a.key][e]||{}:{},type:g?"all":"one"})}),a.layBody.on("mouseenter","tr",function(){var c=b(this),d=c.index();a.layBody.find("tr:eq("+d+")").addClass(C)}).on("mouseleave","tr",function(){var c=b(this),d=c.index();a.layBody.find("tr:eq("+d+")").removeClass(C)}),a.layBody.on("change","."+B,function(){var c=b(this),d=this.value,e=c.parent().data("field"),f=c.parents("tr").eq(0).data("index"),g=i.cache[a.key][f];g[e]=d,layui.event.call(this,k,"edit("+n+")",{value:d,data:g,field:e})}).on("blur","."+B,function(){var d,e=b(this),f=e.parent().data("field"),g=e.parents("tr").eq(0).data("index"),h=i.cache[a.key][g];a.eachCols(function(a,b){b.field==f&&b.templet&&(d=b.templet)}),e.siblings(m).html(d?c(b(d).html()||this.value).render(h):this.value),e.parent().data("content",this.value),e.remove()}),a.layBody.on("click","td",function(){var j,c=b(this),g=(c.data("field"),c.data("edit")),i=c.children(m);return e.close(a.tipsIndex),c.data("off")?void 0:g?("select"===g||(j=b('<input class="layui-input '+B+'">'),j[0].value=c.data("content")||i.text(),c.find("."+B)[0]||c.append(j),j.focus()),void 0):(i.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(i.prop("scrollWidth"))>Math.round(i.outerWidth())&&(a.tipsIndex=e.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(i.height()+16)+"px;"+function(){return"sm"===d.size?"padding: 4px 15px; font-size: 12px;":"lg"===d.size?"padding: 14px 15px;":""}()+'">',i.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),i[0],{tips:[3,""],time:-1,anim:-1,maxWidth:h.ios||h.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(a,b){a.find(".layui-table-tips-c").on("click",function(){e.close(b)})}})),void 0)}),a.layBody.on("click","*[lay-event]",function(){var d=b(this),e=d.parents("tr").eq(0).data("index"),f=a.layBody.find('tr[data-index="'+e+'"]'),g="layui-table-click",h=i.cache[a.key][e];layui.event.call(this,k,"tool("+n+")",{data:i.clearCacheKey(h),event:d.attr("lay-event"),tr:f,del:function(){i.cache[a.key][e]=[],f.remove(),a.scrollPatch()},update:function(d){d=d||{},layui.each(d,function(d,e){if(d in h){var g,i=f.children('td[data-field="'+d+'"]');h[d]=e,a.eachCols(function(a,b){b.field==d&&b.templet&&(g=b.templet)}),i.children(m).html(g?c(b(g).html()||e).render(h):e),i.data("content",e)}})}}),f.addClass(g).siblings("tr").removeClass(g)}),a.layMain.on("scroll",function(){var c=b(this),d=c.scrollLeft(),f=c.scrollTop();a.layHeader.scrollLeft(d),a.layFixed.find(t).scrollTop(f),e.close(a.tipsIndex)}),G.on("resize",function(){a.fullSize(),a.scrollPatch()})},i.init=function(a,c){c=c||{};var d=this,e=a?b('table[lay-filter="'+a+'"]'):b(l+"[lay-data]"),f="Table element property lay-data configuration item has a syntax error: ";return e.each(function(){var j,k,d=b(this),e=d.attr("lay-data");try{e=new Function("return "+e)()}catch(h){g.error(f+e)}j=[],k=b.extend({elem:this,cols:[],data:[],skin:d.attr("lay-skin"),size:d.attr("lay-size"),even:"string"==typeof d.attr("lay-even")},i.config,c,e),a&&d.hide(),d.find("thead>tr").each(function(a){k.cols[a]=[],b(this).children().each(function(){var i,d=b(this),e=d.attr("lay-data");try{e=new Function("return "+e)()}catch(h){return g.error(f+e)}i=b.extend({title:d.text(),colspan:d.attr("colspan")||0,rowspan:d.attr("rowspan")||0},e),i.colspan<2&&j.push(i),k.cols[a].push(i)})}),d.find("tbody>tr").each(function(a){var c=b(this),d={};c.children("td").each(function(){var e=b(this),f=e.data("field");return f?d[f]=e.html():void 0}),layui.each(j,function(a,b){var e=c.children("td").eq(a);d[b.field]=e.html()}),k.data[a]=d}),i.render(k)}),d},i.checkStatus=function(a){var b=0,c=0,d=[],e=i.cache[a]||[];return layui.each(e,function(a,e){return e.constructor===Array?(c++,void 0):(e[i.config.checkName]&&(b++,d.push(i.clearCacheKey(e))),void 0)}),{data:d,isAll:e.length?b===e.length-c:!1}},j.config={},i.reload=function(a,c){var d=j.config[a];return c=c||{},d?(c.data&&c.data.constructor===Array&&delete d.data,i.render(b.extend(!0,{},d,c))):g.error("The ID option was not found in the table instance")},i.render=function(a){var b=new I(a);return j.call(b)},i.clearCacheKey=function(a){return a=b.extend({},a),delete a[i.config.checkName],delete a[i.config.indexName],a},i.init(),a(k,i)});